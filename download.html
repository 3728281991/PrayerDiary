<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å ‚Äî –ú–æ–ª–∏—Ç–≤–µ–Ω–Ω—ã–π –¥–Ω–µ–≤–Ω–∏–∫</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#8B4513">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body{margin:0;font-family:'Nunito',sans-serif;display:flex;align-items:center;justify-content:center;min-height:100vh;background:#2C2B27;color:#fff}
        .card{background:#332f2a;border-radius:16px;box-shadow:0 10px 40px rgba(0,0,0,.3);padding:28px;width:min(560px,92vw);text-align:center}
        .icon{font-size:64px;margin-bottom:10px}
        h1{margin:0 0 6px 0}
        p{color:#ddd}
        .btn{margin-top:14px;padding:12px 18px;border:none;border-radius:12px;background:#8B4513;color:#fff;font-weight:900;cursor:pointer}
        .hint{margin-top:10px;color:#ccc;font-size:.95rem}
    </style>
</head>
<body>
    <div class="card">
        <div class="icon">üôè</div>
        <h1>–ú–æ–ª–∏—Ç–≤–µ–Ω–Ω—ã–π –¥–Ω–µ–≤–Ω–∏–∫</h1>
        <p>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω –∏–ª–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä –∏ –æ—Ç–∫—Ä—ã–≤–∞–π—Ç–µ –µ–≥–æ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ, –∫–∞–∫ –Ω–∞—Ç–∏–≤–Ω–æ–µ.</p>
        <button class="btn" id="installBtn">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
        <div class="hint" id="hint">–ï—Å–ª–∏ –∫–Ω–æ–ø–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞: –æ—Ç–∫—Ä–æ–π—Ç–µ –º–µ–Ω—é –±—Ä–∞—É–∑–µ—Ä–∞ ‚Üí "–î–æ–±–∞–≤–∏—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω"</div>
    </div>

    <script>
        const isSecure = location.protocol === 'https:' || location.protocol === 'http:';
        if('serviceWorker' in navigator && isSecure){ navigator.serviceWorker.register('sw.js'); }
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById('installBtn').disabled = false;
        });
        document.getElementById('installBtn').addEventListener('click', async () => {
            if (!isSecure){
                document.getElementById('hint').textContent = '–û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ –∞–¥—Ä–µ—Å—É http:// –∏–ª–∏ https:// (–Ω–µ file://). –ù–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ http://localhost.';
                return;
            }
            if (!deferredPrompt) {
                document.getElementById('hint').textContent = '–ï—Å–ª–∏ –∫–Ω–æ–ø–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞: –º–µ–Ω—é –±—Ä–∞—É–∑–µ—Ä–∞ ‚Üí "–î–æ–±–∞–≤–∏—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω"';
                return;
            }
            deferredPrompt.prompt();
            const { outcome } = await deferredPrompt.userChoice;
            if(outcome==='accepted'){
                document.getElementById('hint').textContent = '–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ!';
            }
        });
        window.addEventListener('appinstalled', ()=>{
            document.getElementById('hint').textContent = '–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ! –û—Ç–∫—Ä–æ–π—Ç–µ —Å —Ä–∞–±–æ—á–µ–≥–æ —Å—Ç–æ–ª–∞.';
        });
    </script>
</body>
</html>

